<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°ä¸€å­¸ç¿’ç³»çµ±</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@400;700&family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* ä¿æŒä¸è®Šçš„æ¨£å¼éƒ¨åˆ†çœç•¥ */
        body {
            font-family: 'Noto Sans HK', 'Comic Neue', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(45deg, #FFF3E0, #E1F5FE, #FCE4EC);
            background-size: 300% 300%;
            animation: bgGradient 15s ease infinite;
            text-align: center;
            color: #333;
            overflow-x: hidden;
        }
        @keyframes bgGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .menu, .game, .result {
            max-width: 600px;
            width: 100%;
            margin: 0 auto;
            background: linear-gradient(135deg, #ffffff, #f9f9f9);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            box-sizing: border-box;
            position: relative;
            display: none;
        }
        .visible {
            display: block;
            opacity: 1;
            transform: translateY(0) scale(1);
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        .result.surprise-active {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            max-width: 100%;
        }
        h1 {
            font-family: 'Comic Neue', sans-serif;
            font-weight: 700;
            font-size: 2.5em;
            color: #FF5722;
            text-shadow: 2px 2px 4px rgba(255, 87, 34, 0.3);
            margin: 10px 0;
        }
        h2 {
            font-family: 'Noto Sans HK', sans-serif;
            font-weight: 700;
            font-size: 1.8em;
            color: #0288D1;
            text-shadow: 1px 1px 3px rgba(2, 136, 209, 0.2);
            margin: 15px 0;
        }
        h3 {
            font-family: 'Comic Neue', sans-serif;
            font-weight: 400;
            font-size: 1.5em;
            color: #7B1FA2;
        }
        button {
            padding: 12px 25px;
            margin: 8px;
            background: linear-gradient(45deg, #FFB300, #FFCA28);
            color: #fff;
            font-family: 'Noto Sans HK', sans-serif;
            font-weight: 700;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, opacity 0.2s;
            box-shadow: 0 3px 8px rgba(255, 179, 0, 0.3);
        }
        button:hover {
            box-shadow: 0 6px 12px rgba(255, 179, 0, 0.5);
        }
        button:active {
            animation: bounce 0.3s;
        }
        button:disabled {
            background: linear-gradient(45deg, #B0BEC5, #CFD8DC);
            opacity: 0.6;
            cursor: not-allowed;
            box-shadow: none;
        }
        @keyframes bounce {
            0% { transform: scale(1); }
            50% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }
        .progress-bar {
            width: 100%;
            background-color: #E0E0E0;
            border-radius: 8px;
            height: 25px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
            border: 2px solid #FF9800;
        }
        .progress-bar svg {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        .progress-bar svg rect {
            fill: none;
            stroke: #FF5722;
            stroke-width: 2;
            stroke-dasharray: 10;
            stroke-dashoffset: 0;
            animation: dash 2s linear infinite;
        }
        @keyframes dash {
            from { stroke-dashoffset: 0; }
            to { stroke-dashoffset: -20; }
        }
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #FF5722, #FF8A65);
            border-radius: 6px;
            width: 0%;
            transition: width 0.6s ease-in-out;
            position: relative;
            z-index: 1;
        }
        .timer {
            font-size: 1.3em;
            margin: 10px 0;
            color: #D81B60;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(216, 27, 96, 0.2);
            transition: all 0.3s ease;
        }
        .timer.warning {
            font-size: 1.6em;
            color: #F44336;
            text-shadow: 2px 2px 4px rgba(244, 67, 54, 0.4);
            animation: pulseTimer 0.8s infinite;
        }
        @keyframes pulseTimer {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .question {
            font-size: 1.4em;
            color: #388E3C;
            font-weight: 700;
            margin: 15px 0;
        }
        .answers {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            max-width: 100%;
        }
        .answers button {
            width: 32%;
            margin: 8px 0;
            background: linear-gradient(45deg, #1976D2, #42A5F5);
            transition: all 0.3s ease;
            box-sizing: border-box;
        }
        .answers button.selected {
            background: linear-gradient(45deg, #00ACC1, #00E5FF);
            transform: scale(1.1) rotate(2deg);
            box-shadow: 0 5px 15px rgba(0, 172, 193, 0.4);
            animation: pulse 0.5s;
        }
        .answers button.correct {
            background: linear-gradient(45deg, #00C853, #00E676);
            transform: scale(1.1) rotate(2deg);
            box-shadow: 0 5px 15px rgba(0, 200, 83, 0.4);
        }
        .answers button.wrong-answer-correct {
            background: #F44336;
            animation: blink 1s infinite;
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(244, 67, 54, 0.4);
        }
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        .answers button:disabled:not(.selected):not(.correct):not(.wrong-answer-correct) {
            background: linear-gradient(45deg, #B0BEC5, #CFD8DC);
            opacity: 0.6;
            transform: none;
            box-shadow: none;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.15) rotate(3deg); }
            100% { transform: scale(1.1) rotate(2deg); }
        }
        .result ul {
            list-style: none;
            padding: 0;
        }
        .result li {
            padding: 8px;
            font-size: 1.2em;
            color: #455A64;
            cursor: pointer;
            transition: transform 0.3s, color 0.3s;
        }
        .result li.wrong {
            color: #F44336;
            font-weight: 700;
        }
        .result li:hover {
            color: #2196F3;
            transform: translateX(8px);
        }
        #score {
            font-size: 1.6em;
            color: #FF5722;
            font-weight: 700;
            text-shadow: 1px 1px 3px rgba(255, 87, 34, 0.3);
        }
        .surprise {
            display: none;
            margin-top: 20px;
            transform: scale(0) rotateX(90deg);
            transform-origin: center;
            transition: all 0.7s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .surprise.active {
            transform: scale(1) rotateX(0deg);
        }
        .surprise img {
            max-width: 90vw;
            max-height: 70vh;
            border-radius: 15px;
            border: 3px solid #FFCA28;
        }
        .surprise-message {
            font-size: 1.2em;
            color: #FF5722;
            margin: 10px 0;
            font-weight: 700;
        }
        .feedback {
            font-size: 1.2em;
            margin: 10px 0;
            font-weight: 700;
        }
        .feedback.correct {
            color: #388E3C;
        }
        .feedback.wrong {
            color: #F44336;
        }
        @keyframes bounceIn {
            0% { transform: scale(0.5); opacity: 0; }
            60% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); }
        }
        .surprise.active img {
            animation: bounceIn 0.6s ease;
        }
        #dictationInput {
            padding: 10px;
            font-size: 1.2em;
            border: 2px solid #FF9800;
            border-radius: 8px;
            width: 80%;
            margin: 10px auto;
            box-shadow: 0 3px 8px rgba(255, 152, 0, 0.3);
        }
        #audioContainer {
            margin-top: 10px;
        }
        audio {
            width: 100%;
            max-width: 600px;
        }
        /* å…¶ä»–æ¨£å¼ä¿æŒä¸è®Š */
    </style>
</head>
<body>
    <div class="menu visible" id="menu">
        <h1>ğŸ“š å°ä¸€å­¸ç¿’ç³»çµ± ğŸ‰</h1>
        <h2>âœï¸ ä¸­æ–‡ç§‘</h2>
        <button onclick="startGame('chinese', 'game1')">éŠæˆ² 1</button>
        <button onclick="startGame('chinese', 'game2')">éŠæˆ² 2</button>
        <h2>ğŸ‡¬ğŸ‡§ è‹±æ–‡ç§‘</h2>
        <button onclick="startGame('english', 'game1')">éŠæˆ² 1</button>
        <button onclick="startGame('english', 'game2')">éŠæˆ² 2</button>
        <button onclick="startGame('english', 'dictation')">è‹±æ–‡é»˜æ›¸</button>
        <h2>â• æ•¸å­¸ç§‘</h2>
        <button onclick="startGame('math', 'addition_subtraction')">åŠ æ¸›æ•¸æ•¸</button>
        <button onclick="startGame('math', 'time_date')">æ™‚é–“æ—¥æœŸ</button>
        <h2>ğŸŒ å¸¸è­˜ç§‘</h2>
        <button onclick="startGame('common', 'game1')">è©èªæ¸¬è©¦</button>
        <h2>ğŸ—£ï¸ æ™®é€šè©±ç§‘</h2>
        <button onclick="startGame('putonghua', 'initials')">è²æ¯æ¸¬è©¦</button>
        <button onclick="startGame('putonghua', 'finals')">éŸ»æ¯æ¸¬è©¦</button>
        <button onclick="startGame('putonghua', 'tones')">è²èª¿æ¸¬è©¦</button>
    </div>

    <div class="game" id="game">
        <div class="progress-bar">
            <svg><rect x="50%" y="1" width="49%" height="21"/></svg>
            <div class="progress" id="progress"></div>
        </div>
        <div class="timer" id="timer">å‰©é¤˜æ™‚é–“: 60ç§’</div>
        <div class="question" id="question"></div>
        <div class="answers" id="answers"></div>
        <button id="submitBtn" onclick="submitAnswer()" disabled>æäº¤</button>
        <button onclick="nextQuestion()" id="nextBtn" style="display: none;">ä¸‹ä¸€é¡Œ</button>
        <div class="feedback" id="feedback"></div>
    </div>

    <div class="result" id="result">
        <h2>ç¸½æˆç¸¾</h2>
        <p id="score"></p>
        <h3 id="recordTitle" style="display: block;">ç­”é¡Œç´€éŒ„</h3>
        <ul id="record"></ul>
        <div class="surprise" id="surprise">
            <h3>æ­å–œæ»¿åˆ†ï¼</h3>
            <p class="surprise-message" id="surpriseMessage"></p>
            <img id="rewardImg" alt="çå‹µåœ–ç‰‡">
        </div>
        <button onclick="backToMenu()">è¿”å›ç›®éŒ„</button>
    </div>

    <audio id="victorySound" src="https://www.soundjay.com/buttons/cheer.mp3"></audio>

    <script>
        let currentSubject, currentGame, currentQuestion = 0, score = 0, totalQuestions;
        let answers = [], timer, timeLeft, submitted = false;
        const UNSPLASH_ACCESS_KEY = 'YOUR_UNSPLASH_ACCESS_KEY'; // è«‹æ›¿æ›ç‚ºæ‚¨çš„ Unsplash API Access Key


        const commonQuestions = {
            hygiene: [
                { question: "æ¯å¤©________èƒ½è®“èº«é«”æ›´å¼·å£¯ï¼Œä¾‹å¦‚è·‘æ­¥æˆ–è·³ç¹©ã€‚", answer: "é‹å‹•" },
                { question: "åƒé£¯æ™‚ä¸èƒ½åªåƒè‡ªå·±å–œæ­¡çš„é£Ÿç‰©ï¼Œå¦å‰‡å®¹æ˜“________ã€‚", answer: "åé£Ÿ" },
                { question: "æ°´æœå’Œè”¬èœå°èº«é«”________ï¼Œè¦å¤šåƒæ‰èƒ½é•·é«˜ã€‚", answer: "æœ‰ç›Š" },
                { question: "æ¯å¤©________æ—©èµ·èº«é«”å¥½ï¼Œä¸Šèª²ä¹Ÿæœƒæ›´å°ˆå¿ƒã€‚", answer: "æ—©ç¡æ—©èµ·" },
                { question: "æ¯å¤©________èƒ½è®“èº«é«”ä¹¾æ·¨ï¼Œè¨˜å¾—ç”¨æº«æ°´å’Œè‚¥çš‚ã€‚", answer: "æ´—æ¾¡" },
                { question: "å’Œå®¶äººé£¯å¾Œä¸€èµ·å»å…¬åœ’________ï¼Œèƒ½å¹«åŠ©æ¶ˆåŒ–ã€‚", answer: "æ•£æ­¥" },
                { question: "æ‰“æƒæˆ¿é–“ã€æ•´ç†æ›¸åŒ…èƒ½ä¿æŒç’°å¢ƒ________ã€‚", answer: "æ•´æ½”" },
                { question: "æ‰“æƒæ•™å®¤æ™‚ï¼ŒåŒå­¸å€‘ä¸€èµ·________ï¼Œæœ‰äººæƒåœ°ã€æœ‰äººæ“¦æ¡Œå­ã€‚", answer: "åˆ†å·¥åˆä½œ" }
            ],
            growth: [
                { question: "ä¹³ç‰™è„«è½å¾Œï¼Œé•·å‡ºçš„æ–°ç‰™é½’å«åš________ï¼Œè¦å¥½å¥½ä¿è­·å®ƒå€‘ã€‚", answer: "æ†é½’" },
                { question: "å¾________åˆ°æˆå¹´ä¹‹å‰ï¼Œæˆ‘å€‘æœƒç¶“æ­·èº«é«”çš„è®ŠåŒ–ã€‚", answer: "å…’ç«¥æœŸ" },
                { question: "å¾å…’ç«¥è®Šæˆå¤§äººçš„éç¨‹å«åš________ï¼Œèº«é«”æœƒæ…¢æ…¢é•·é«˜ã€‚", answer: "é’æ˜¥æœŸ" },
                { question: "å¼Ÿå¼Ÿå¹´ç´€å°ï¼Œæˆ‘å€‘è¦å¥½å¥½________ä»–ï¼Œæ•™ä»–ç©¿è¡£æœã€‚", answer: "ç…§é¡§" }
            ],
            family: [
                { question: "çˆ¸çˆ¸çš„åª½åª½æ˜¯æˆ‘çš„________ï¼Œæˆ‘æœƒå¸¸å¸¸é™ªå¥¹èŠå¤©ã€‚", answer: "ç¥–æ¯" },
                { question: "ç•¶å¼Ÿå¼Ÿä¸å°å¿ƒæ‰“ç ´æ¯å­ï¼Œæˆ‘å€‘è¦å­¸æœƒ________ä»–çš„ééŒ¯ã€‚", answer: "é«”è«’" },
                { question: "å®¶äººä¹‹é–“è¦äº’ç›¸________ï¼Œé€™æ¨£å®¶åº­æ‰æœƒæº«æš–ã€‚", answer: "ç›¸è¦ªç›¸æ„›" },
                { question: "å¼Ÿå¼Ÿå¾—åˆ°æ–°ç©å…·æ™‚ï¼Œé¡˜æ„å’Œæˆ‘ä¸€èµ·________ï¼Œæˆ‘æ„Ÿåˆ°å¾ˆé–‹å¿ƒã€‚", answer: "åˆ†äº«" },
                { question: "çˆ¸çˆ¸çš„å“¥å“¥æ˜¯æˆ‘çš„________ã€‚", answer: "ä¼¯çˆ¶" },
                { question: "åª½åª½çš„å§å¦¹çš„ä¸ˆå¤«æ˜¯æˆ‘çš„________ã€‚", answer: "å§¨ä¸ˆ" },
                { question: "åª½åª½çš„å¼Ÿå¼Ÿæ˜¯æˆ‘çš„________ã€‚", answer: "èˆ…çˆ¶" },
                { question: "ä¼¯çˆ¶å’Œå”å”æ˜¯________çš„å…„å¼Ÿã€‚", answer: "çˆ¸çˆ¸" },
                { question: "å§¨æ¯æ˜¯________çš„å§å¦¹ï¼Œå¥¹å¸¸å¸¸ä¾†å®¶è£¡åšå®¢ã€‚", answer: "åª½åª½" },
                { question: "çœ‹åˆ°åŒå­¸éœ€è¦________æ™‚ï¼Œæˆ‘å€‘è¦ä¸»å‹•ä¼¸å‡ºæ´æ‰‹ã€‚", answer: "å¹«å¿™" },
                { question: "________æ˜¯ä¼¯çˆ¶çš„å…’å­ã€‚", answer: "å ‚å…„ã€å ‚å¼Ÿ" },
                { question: "å ‚å¦¹ã€å ‚å¦¹æ˜¯________çš„å¥³å…’ã€‚ï¼ˆè«‹é¸å‡ºæ‰€æœ‰æ­£ç¢ºç­”æ¡ˆï¼‰", answer: ["ä¼¯çˆ¶", "å”å”", "å¬¸å¬¸"] },
                { question: "ä¼¯çˆ¶ã€å”å”å’Œå§‘æ¯éƒ½æ˜¯________çš„å…„å¼Ÿå§Šå¦¹ã€‚", answer: "çˆ¸çˆ¸" },
                { question: "________æ˜¯å§¨æ¯ã€å§¨ä¸ˆçš„å…’å­ã€‚", answer: "è¡¨å“¥ã€è¡¨å¼Ÿ" },
                { question: "________æ˜¯å§‘æ¯ã€å§‘ä¸ˆçš„å¥³å…’ã€‚", answer: "è¡¨å§ã€è¡¨å¦¹" },
                { question: "________æ˜¯çˆ¸çˆ¸çš„å¼Ÿå¼Ÿã€‚", answer: "å”å”" },
                { question: "________æ˜¯å”å”çš„å¦»å­ã€‚", answer: "å¬¸å¬¸" },
                { question: "________æ˜¯å§‘æ¯çš„ä¸ˆå¤«ã€‚", answer: "å§‘ä¸ˆ" },
                { question: "________æ˜¯çˆ¸çˆ¸çš„å§å¦¹ã€‚", answer: "å§‘æ¯" },
                { question: "________æ˜¯åª½åª½çš„çˆ¸çˆ¸ã€‚", answer: "å¤–ç¥–çˆ¶" },
                { question: "________æ˜¯çˆ¸çˆ¸çš„çˆ¸çˆ¸ã€‚", answer: "ç¥–çˆ¶" }
            ],
            festival: [
                { question: "åœ¨________çš„å‚³èªªä¸­ï¼Œäººå€‘ç”¨é­ç‚®è¶•èµ°å¯æ€•çš„ã€Œå¹´ç¸ã€ã€‚", answer: "æ˜¥ç¯€" },
                { question: "æ˜¥ç¯€æ™‚ï¼Œå®¶å®¶æˆ¶æˆ¶æœƒåœ¨é–€ä¸Šè²¼________ï¼Œå¯«ä¸Šå‰ç¥¥è©±ã€‚", answer: "æ®æ˜¥" },
                { question: "æ˜¥ç¯€æœŸé–“ï¼Œé•·è¼©æœƒçµ¦å°æœ‹å‹________ï¼Œä»£è¡¨ç¥ç¦ã€‚", answer: "åˆ©æ˜¯" },
                { question: "å’Œå®¶äººä¸€èµ·________æ˜¯æ˜¥ç¯€çš„é‡è¦ç¿’ä¿—ï¼Œäº’ç›¸èªªæ­å–œã€‚", answer: "æ‹œå¹´" },
                { question: "æ¯å€‹åœ‹å®¶éƒ½æœ‰ä¸åŒçš„________ï¼Œä¾‹å¦‚ä¸­ç§‹ç¯€åƒæœˆé¤…ã€‚", answer: "ç¿’ä¿—" },
                { question: "ç”Ÿæ—¥æ™‚ï¼Œå…¨å®¶äººæœƒä¸€èµ·________ï¼Œå”±ç”Ÿæ—¥æ­Œã€åƒè›‹ç³•ã€‚", answer: "æ…¶ç¥" },
                { question: "æ–°å¹´å‰å¤•ï¼Œå…¨å®¶äººåœ˜èšä¸€èµ·åƒ________ï¼Œæ¡Œä¸Šæœ‰å¾ˆå¤šå¥½åƒçš„èœã€‚", answer: "å¹´å¤œé£¯" },
                { question: "éå¹´æ™‚ï¼Œé•·è¼©æœƒé€æˆ‘å€‘________ï¼Œç”œç”œçš„è±¡å¾µå¥½é‹æ°£ã€‚", answer: "ç³–æœ" },
                { question: "å’Œå¥½æœ‹å‹ä¸€èµ·éŠæˆ²æ™‚ï¼Œæˆ‘æ„Ÿåˆ°éå¸¸________ã€‚", answer: "å¿«æ¨‚" },
                { question: "æˆ‘å€‘è¦________è€å¸«å’Œé•·è¼©ï¼Œå°ä»–å€‘èªªè©±è¦æœ‰ç¦®è²Œã€‚", answer: "å°Šæ•¬" }
            ]
        };

        const mathQuestions = {
            addition_subtraction: [],
            time_date: []
        };

        const putonghuaInitialsQuestions = [
            { question: "ã€Œç›ªã€çš„è²æ¯æ˜¯________ã€‚", answer: "d" },
            { question: "ã€Œçˆ¸ã€çš„è²æ¯æ˜¯________ã€‚", answer: "b" },
            { question: "ã€Œå£ã€çš„è²æ¯æ˜¯________ã€‚", answer: "k" },
            { question: "ã€Œæ‹‰ã€çš„è²æ¯æ˜¯________ã€‚", answer: "l" },
            { question: "ã€Œç±³ã€çš„è²æ¯æ˜¯________ã€‚", answer: "m" },
            { question: "ã€Œä½ ã€çš„è²æ¯æ˜¯________ã€‚", answer: "n" },
            { question: "ã€Œå¥½ã€çš„è²æ¯æ˜¯________ã€‚", answer: "h" },
            { question: "ã€Œå·¥ã€çš„è²æ¯æ˜¯________ã€‚", answer: "g" },
            { question: "ã€Œç¬›ã€çš„è²æ¯æ˜¯________ã€‚", answer: "d" },
            { question: "ã€Œæ‹¿ã€çš„è²æ¯æ˜¯________ã€‚", answer: "n" },
            { question: "ã€Œæ¨‚ã€çš„è²æ¯æ˜¯________ã€‚", answer: "l" },
            { question: "ã€Œæ¢¯ã€çš„è²æ¯æ˜¯________ã€‚", answer: "t" },
            { question: "ã€Œå“¥ã€çš„è²æ¯æ˜¯________ã€‚", answer: "g" },
            { question: "ã€Œæ­Œã€çš„è²æ¯æ˜¯________ã€‚", answer: "g" },
            { question: "ã€Œå®¢ã€çš„è²æ¯æ˜¯________ã€‚", answer: "k" },
            { question: "ã€Œå¯ã€çš„è²æ¯æ˜¯________ã€‚", answer: "k" },
            { question: "ã€Œè­·ã€çš„è²æ¯æ˜¯________ã€‚", answer: "h" },
            { question: "ã€Œç›’ã€çš„è²æ¯æ˜¯________ã€‚", answer: "h" },
            { question: "ã€Œå“­ã€çš„è²æ¯æ˜¯________ã€‚", answer: "k" },
            { question: "ã€Œå¡ã€çš„è²æ¯æ˜¯________ã€‚", answer: "k" },
            { question: "ã€Œæ²³ã€çš„è²æ¯æ˜¯________ã€‚", answer: "h" },
            { question: "ã€Œæ¡ã€çš„è²æ¯æ˜¯________ã€‚", answer: "t" },
            { question: "ã€Œè£ã€çš„è²æ¯æ˜¯________ã€‚", answer: "l" },
            { question: "ã€Œéƒ½ã€çš„è²æ¯æ˜¯________ã€‚", answer: "d" },
            { question: "ã€Œå¥¶ã€çš„è²æ¯æ˜¯________ã€‚", answer: "n" },
            { question: "ã€Œå¼Ÿã€çš„è²æ¯æ˜¯________ã€‚", answer: "d" },
            { question: "ã€Œä»–ã€çš„è²æ¯æ˜¯________ã€‚", answer: "t" },
            { question: "ã€Œäº†ã€çš„è²æ¯æ˜¯________ã€‚", answer: "l" },
            { question: "ã€Œæ‚¨ã€çš„è²æ¯æ˜¯________ã€‚", answer: "n" },
            { question: "ã€Œçš„ã€çš„è²æ¯æ˜¯________ã€‚", answer: "d" },
            { question: "ã€Œæš–ã€çš„è²æ¯æ˜¯________ã€‚", answer: "n" },
            { question: "ã€Œå¾—ã€çš„è²æ¯æ˜¯________ã€‚", answer: "d" },
            { question: "ã€Œç‰¹ã€çš„è²æ¯æ˜¯________ã€‚", answer: "t" },
            { question: "ã€Œå„ã€çš„è²æ¯æ˜¯________ã€‚", answer: "g" },
            { question: "ã€Œç©ºã€çš„è²æ¯æ˜¯________ã€‚", answer: "k" },
            { question: "ã€Œé¡§ã€çš„è²æ¯æ˜¯________ã€‚", answer: "g" },
            { question: "ã€Œç«ã€çš„è²æ¯æ˜¯________ã€‚", answer: "h" },
            { question: "ã€ŒèŒã€çš„è²æ¯æ˜¯________ã€‚", answer: "k" },
            { question: "ã€Œå–ã€çš„è²æ¯æ˜¯________ã€‚", answer: "h" },
            { question: "ã€Œé¼“ã€çš„è²æ¯æ˜¯________ã€‚", answer: "g" },
            { question: "ã€Œè³€ã€çš„è²æ¯æ˜¯________ã€‚", answer: "h" }
        ];

        const putonghuaFinalsQuestions = [
            { question: "ã€Œé–€ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "en" },
            { question: "ã€Œå¥¶ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ai" },
            { question: "ã€ŒåŒã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ong" },
            { question: "ã€Œå¦¹ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ei" },
            { question: "ã€Œç™»ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "eng" },
            { question: "ã€Œæ”¾ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ang" },
            { question: "ã€Œé ­ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ou" },
            { question: "ã€Œè²“ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ao" },
            { question: "ã€Œæµ·ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ai" },
            { question: "ã€Œé£›ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ei" },
            { question: "ã€Œç˜¦ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ou" },
            { question: "ã€Œä¸Šã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ang" },
            { question: "ã€Œå ‚ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ang" },
            { question: "ã€Œä¼´ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "an" },
            { question: "ã€Œå¹«ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ang" },
            { question: "ã€Œå¿™ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ang" },
            { question: "ã€Œé£¯ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "an" },
            { question: "ã€Œç‡ˆã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "eng" },
            { question: "ã€Œæ¡¶ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ong" },
            { question: "ã€Œè®“ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ang" },
            { question: "ã€Œå£ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ou" },
            { question: "ã€Œå‘³ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ei" },
            { question: "ã€ŒçœŸã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "en" },
            { question: "ã€Œé«˜ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ao" },
            { question: "ã€Œå¸¶ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ai" },
            { question: "ã€Œé»‘ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ei" },
            { question: "ã€Œæ¿ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "an" },
            { question: "ã€Œå§¥ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ao" },
            { question: "ã€Œåˆ€ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ao" },
            { question: "ã€Œç‹—ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ou" },
            { question: "ã€Œé ­ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ou" },
            { question: "ã€Œé•·ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ang" },
            { question: "ã€Œå¼µã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ang" },
            { question: "ã€Œå€‘ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "en" },
            { question: "ã€Œä¸‰ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "an" },
            { question: "ã€Œå†¬ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ong" },
            { question: "ã€Œé•·ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ang" },
            { question: "ã€Œå¥½ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ao" },
            { question: "ã€Œä¾†ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ai" },
            { question: "ã€Œå®‰ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "an" },
            { question: "ã€Œæ©ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "en" },
            { question: "ã€Œéª¯ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ang" },
            { question: "ã€Œé«’ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "ang" },
            { question: "ã€Œæ¬ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "an" },
            { question: "ã€Œé›£ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "an" },
            { question: "ã€Œåˆ†ã€çš„éŸ»æ¯æ˜¯________ã€‚", answer: "en" }
        ];

        const putonghuaTonesQuestions = [
            { question: "ã€Œåª½ã€æ˜¯ç¬¬________è²ã€‚", answer: "1" },
            { question: "ã€Œé¦¬ã€æ˜¯ç¬¬________è²ã€‚", answer: "3" },
            { question: "ã€Œç½µã€æ˜¯ç¬¬________è²ã€‚", answer: "4" },
            { question: "ã€Œéº»ã€æ˜¯ç¬¬________è²ã€‚", answer: "2" },
            { question: "ã€ŒåŒ…ã€æ˜¯ç¬¬________è²ã€‚", answer: "1" },
            { question: "ã€Œè·‘ã€æ˜¯ç¬¬________è²ã€‚", answer: "3" }
        ];

        const putonghuaInitialsOptions = ['b', 'p', 'm', 'f', 'd', 't', 'n', 'l', 'g', 'k', 'h'];
        const putonghuaFinalsOptions = ['an', 'en', 'ang', 'eng', 'ong', 'ai', 'ei', 'ao', 'ou', 'a', 'o', 'e', 'i', 'u', 'Ã¼'];
        const putonghuaTonesOptions = ['1', '2', '3', '4'];

        const encouragementMessages = [
            "ä½ å¤ªæ£’äº†ï¼æ»¿åˆ†é”äººï¼",
            "å®Œç¾è¡¨ç¾ï¼Œç¹¼çºŒåŠ æ²¹ï¼",
            "ä½ æ˜¯å­¸ç¿’å°å¤©æ‰ï¼",
            "æ»¿åˆ†ï¼çœŸäº†ä¸èµ·ï¼",
            "å¤ªå²å®³äº†ï¼Œçç›ƒå±¬æ–¼ä½ ï¼"
        ];
        const englishDictationQuestions = [
            { audioUrl: "./Term2-dict3.MP3", answer: "Hello, how are you?" }
        ];

        let gameData = {
            chinese: { game1: [], game2: [] },
            english: { game1: [], game2: [], dictation: [] },
            math: { addition_subtraction: [], time_date: [] },
            common: { game1: [] },
            putonghua: { initials: [], finals: [], tones: [] }
        };

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function generateCountingQuestion() {
            const group1 = Math.floor(Math.random() * 4) + 3;
            const group2 = group1 * 2;
            const k = Math.floor(Math.random() * 10) + 3;
            const correctAnswer = group1 * k;
            const remainder = correctAnswer % group2;
            const question = `è”¬æœåº—æœ‰ç•ªèŒ„ä¸€ç±ƒï¼Œå¦‚æœä»¥æ¯${group1}å€‹ä¸€æ•¸ï¼Œå‰›å¥½æ²’æœ‰å‰©é¤˜ï¼›å¦‚æœä»¥æ¯${group2}å€‹ä¸€æ•¸ï¼Œå‰‡å‰©é¤˜${remainder}å€‹ã€‚é€™ç›¤ç•ªèŒ„çš„æ•¸é‡å¯èƒ½æ˜¯________å€‹ã€‚`;
            return { question, answer: correctAnswer.toString(), group1, group2, remainder };
        }

        function generateOptions(correctAnswer, isPutonghuaInitials = false, isPutonghuaFinals = false, isPutonghuaTones = false, theme = null, group1 = null, group2 = null, remainder = null) {
            if (isPutonghuaInitials) return putonghuaInitialsOptions;
            if (isPutonghuaFinals) return putonghuaFinalsOptions;
            if (isPutonghuaTones) return putonghuaTonesOptions;
            if (currentSubject === 'math' && currentGame === 'addition_subtraction') {
                const correctNum = parseInt(correctAnswer);
                let options = [correctAnswer];
                let distractors = new Set();
                while (distractors.size < 5) {
                    const offset = Math.floor(Math.random() * 20) - 10;
                    const distractor = correctNum + offset;
                    if (distractor >= 0 && distractor !== correctNum && !distractors.has(distractor) && !(distractor % group1 === 0 && distractor % group2 === remainder)) {
                        distractors.add(distractor);
                    }
                }
                options = options.concat([...distractors].map(String));
                return shuffleArray(options);
            }
            let options = Array.isArray(correctAnswer) ? correctAnswer : [correctAnswer];
            let otherAnswers = [];
            for (let t in commonQuestions) {
                otherAnswers = otherAnswers.concat(commonQuestions[t].map(q => Array.isArray(q.answer) ? q.answer[0] : q.answer));
            }
            otherAnswers = otherAnswers.filter(a => !options.includes(a));
            otherAnswers = shuffleArray(otherAnswers).slice(0, 6 - options.length);
            options = options.concat(otherAnswers);
            return shuffleArray(options);
        }

        function startGame(subject, game) {
            currentSubject = subject;
            currentGame = game;
            currentQuestion = 0;
            score = 0;
            answers = [];
            submitted = false;
            if (timer) clearInterval(timer);

            if (subject === 'english' && game === 'dictation') {
                totalQuestions = englishDictationQuestions.length;
                gameData[subject][game] = englishDictationQuestions.map(q => ({
                    audioUrl: q.audioUrl,
                    answer: q.answer
                }));
            } else if (subject === 'putonghua' && game === 'initials') {
                totalQuestions = putonghuaInitialsQuestions.length;
                gameData[subject][game] = shuffleArray([...putonghuaInitialsQuestions]).map(q => ({
                    question: q.question,
                    options: generateOptions(q.answer, true, false, false),
                    correct: [putonghuaInitialsOptions.indexOf(q.answer)]
                }));
            } else if (subject === 'putonghua' && game === 'finals') {
                totalQuestions = putonghuaFinalsQuestions.length;
                gameData[subject][game] = shuffleArray([...putonghuaFinalsQuestions]).map(q => ({
                    question: q.question,
                    options: generateOptions(q.answer, false, true, false),
                    correct: [putonghuaFinalsOptions.indexOf(q.answer)]
                }));
            } else if (subject === 'putonghua' && game === 'tones') {
                totalQuestions = putonghuaTonesQuestions.length;
                gameData[subject][game] = shuffleArray([...putonghuaTonesQuestions]).map(q => ({
                    question: q.question,
                    options: generateOptions(q.answer, false, false, true),
                    correct: [putonghuaTonesOptions.indexOf(q.answer)]
                }));
            } else if (subject === 'common' && game === 'game1') {
                let allQuestions = [];
                for (let theme in commonQuestions) {
                    allQuestions = allQuestions.concat(commonQuestions[theme].map(q => ({ ...q, theme })));
                }
                totalQuestions = allQuestions.length;
                gameData[subject][game] = shuffleArray([...allQuestions]).map(q => {
                    const options = generateOptions(q.answer, false, false, false, q.theme);
                    const correctIndices = Array.isArray(q.answer) ? q.answer.map(ans => options.indexOf(ans)).filter(idx => idx !== -1) : [options.indexOf(q.answer)];
                    return { question: q.question, options, correct: correctIndices };
                });
            } else if (subject === 'math' && game === 'addition_subtraction') {
                totalQuestions = 10;
                let generatedQuestions = Array.from({ length: totalQuestions }, generateCountingQuestion);
                gameData[subject][game] = generatedQuestions.map(q => {
                    const options = generateOptions(q.answer, false, false, false, null, q.group1, q.group2, q.remainder);
                    return { question: q.question, options, correct: [options.indexOf(q.answer)] };
                });
            } else {
                totalQuestions = 10;
                let allQuestions = [];
                for (let theme in commonQuestions) {
                    allQuestions = allQuestions.concat(commonQuestions[theme]);
                }
                gameData[subject][game] = shuffleArray([...allQuestions]).slice(0, totalQuestions).map(q => {
                    const options = generateOptions(q.answer);
                    const correctIndices = Array.isArray(q.answer) ? q.answer.map(ans => options.indexOf(ans)).filter(idx => idx !== -1) : [options.indexOf(q.answer)];
                    return { question: q.question, options, correct: correctIndices };
                });
            }

            hideElement('menu');
            showElement('game');
            setTimeout(() => {
                document.getElementById('game').scrollIntoView({ behavior: 'smooth' });
            }, 100);
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestion >= totalQuestions) {
                showResult();
                return;
            }
            let qData = gameData[currentSubject][currentGame][currentQuestion];
            let questionDiv = document.getElementById('question');
            let answersDiv = document.getElementById('answers');
            answersDiv.innerHTML = '';

            if (currentGame === 'dictation') {
                questionDiv.innerHTML = `
                    <p>è«‹è†è½ä»¥ä¸‹éŸ³é »ä¸¦è¼¸å…¥å¥å­ï¼š</p>
                    <div id="audioContainer">
                        <audio controls id="dictationAudio">
                            <source src="${qData.audioUrl}" type="audio/mpeg">
                            æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´éŸ³é »æ’­æ”¾ã€‚
                        </audio>
                    </div>
                `;
                let audioElement = document.getElementById('dictationAudio');
                audioElement.addEventListener('error', (e) => {
                    console.error('éŸ³é »è¼‰å…¥å¤±æ•—:', e);
                    document.getElementById('feedback').innerText = 'éŸ³é »è¼‰å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯æˆ–æª”æ¡ˆé€£çµã€‚';
                });
                audioElement.addEventListener('loadeddata', () => {
                    console.log('éŸ³é »æˆåŠŸè¼‰å…¥');
                });
                let input = document.createElement('input');
                input.type = 'text';
                input.id = 'dictationInput';
                answersDiv.appendChild(input);
                let submitBtn = document.createElement('button');
                submitBtn.innerText = 'æäº¤';
                submitBtn.onclick = submitDictationAnswer;
                answersDiv.appendChild(submitBtn);
                document.getElementById('submitBtn').style.display = 'none';
            } else {
                questionDiv.innerText = qData.correct.length > 1 ? `${qData.question}ï¼ˆå¤šé¸é¡Œï¼Œè«‹é¸å‡ºæ‰€æœ‰æ­£ç¢ºç­”æ¡ˆï¼‰` : qData.question;
                qData.options.forEach((opt, idx) => {
                    let btn = document.createElement('button');
                    btn.innerText = opt;
                    btn.onclick = () => selectAnswer(idx, btn);
                    answersDiv.appendChild(btn);
                });
                document.getElementById('submitBtn').style.display = 'inline';
                document.getElementById('submitBtn').disabled = true;
            }
            answers[currentQuestion] = [];
            updateProgress();
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('feedback').innerText = '';
            submitted = false;
            if (timer) clearInterval(timer); // æ¸…é™¤èˆŠè¨ˆæ™‚å™¨
            startTimer(); // æ¯é¡Œé–‹å§‹æ™‚é‡ç½®è¨ˆæ™‚å™¨
            setTimeout(() => {
                document.getElementById('game').scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        function submitDictationAnswer() {
            let input = document.getElementById('dictationInput').value.trim();
            let correctAnswer = gameData[currentSubject][currentGame][currentQuestion].answer;
            let feedback = document.getElementById('feedback');
            answers[currentQuestion] = [input];
            if (input.toLowerCase() === correctAnswer.toLowerCase()) {
                score++;
                feedback.innerText = 'æ­£ç¢ºï¼';
                feedback.className = 'feedback correct';
            } else {
                feedback.innerText = `éŒ¯èª¤ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${correctAnswer}`;
                feedback.className = 'feedback wrong';
            }
            document.getElementById('nextBtn').style.display = 'inline';
            submitted = true;
            if (timer) clearInterval(timer); // æäº¤å¾Œåœæ­¢è¨ˆæ™‚å™¨
        }

        function selectAnswer(index, button) {
            if (submitted) return;
            let qData = gameData[currentSubject][currentGame][currentQuestion];
            let isMultipleChoice = qData.correct.length > 1;

            if (isMultipleChoice) {
                // å¤šé¸æ¨¡å¼ï¼šåˆ‡æ›é¸æ“‡ç‹€æ…‹
                if (button.classList.contains('selected')) {
                    button.classList.remove('selected');
                    answers[currentQuestion] = answers[currentQuestion].filter(i => i !== index);
                } else {
                    button.classList.add('selected');
                    answers[currentQuestion].push(index);
                }
            } else {
                // å–®é¸æ¨¡å¼ï¼šæ¸…é™¤å…¶ä»–é¸æ“‡ä¸¦é¸ä¸­ç•¶å‰
                let buttons = document.querySelectorAll('#answers button');
                buttons.forEach(btn => btn.classList.remove('selected'));
                button.classList.add('selected');
                answers[currentQuestion] = [index];
            }

            document.getElementById('submitBtn').disabled = answers[currentQuestion].length === 0;
        }

        function submitAnswer() {
            if (submitted) return;
            let qData = gameData[currentSubject][currentGame][currentQuestion];
            let selected = answers[currentQuestion];
            let feedback = document.getElementById('feedback');
            let buttons = document.querySelectorAll('#answers button');

            buttons.forEach((btn, idx) => {
                btn.disabled = true;
                if (qData.correct.includes(idx)) {
                    btn.classList.add('correct');
                }
                if (selected.includes(idx) && !qData.correct.includes(idx)) {
                    btn.classList.add('wrong-answer-correct');
                }
            });

            if (JSON.stringify(selected.sort()) === JSON.stringify(qData.correct.sort())) {
                score++;
                feedback.innerText = 'æ­£ç¢ºï¼';
                feedback.className = 'feedback correct';
            } else {
                feedback.innerText = `éŒ¯èª¤ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${qData.correct.map(i => qData.options[i]).join(', ')}`;
                feedback.className = 'feedback wrong';
            }
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('nextBtn').style.display = 'inline';
            submitted = true;
            if (timer) clearInterval(timer); // æäº¤å¾Œåœæ­¢è¨ˆæ™‚å™¨
        }

        function nextQuestion() {
            currentQuestion++;
            loadQuestion();
        }

        function showResult() {
            if (timer) clearInterval(timer);
            hideElement('game');
            showElement('result');
            document.getElementById('score').innerText = `å¾—åˆ†ï¼š${score} / ${totalQuestions}`;
            let record = document.getElementById('record');
            record.innerHTML = '';
            gameData[currentSubject][currentGame].forEach((q, idx) => {
                let userAnswer = currentGame === 'dictation' ? answers[idx][0] : answers[idx].map(i => q.options[i]).join(', ');
                let correctAnswer = currentGame === 'dictation' ? q.answer : q.correct.map(i => q.options[i]).join(', ');
                let li = document.createElement('li');
                li.innerText = `${idx + 1}. ${q.question} ä½ çš„ç­”æ¡ˆï¼š${userAnswer} æ­£ç¢ºç­”æ¡ˆï¼š${correctAnswer}`;
                if (currentGame === 'dictation' && userAnswer.toLowerCase() !== correctAnswer.toLowerCase()) {
                    li.classList.add('wrong');
                } else if (currentGame !== 'dictation' && JSON.stringify(answers[idx].sort()) !== JSON.stringify(q.correct.sort())) {
                    li.classList.add('wrong');
                }
                record.appendChild(li);
            });
            if (score === totalQuestions) {
                document.getElementById('result').classList.add('surprise-active');
                let surprise = document.getElementById('surprise');
                surprise.style.display = 'block';
                setTimeout(() => {
                    surprise.classList.add('active');
                    document.getElementById('surpriseMessage').innerText = encouragementMessages[Math.floor(Math.random() * encouragementMessages.length)];
                    fetchRandomImage();
                    document.getElementById('victorySound').play();
                }, 100);
            }
        }

        function fetchRandomImage() {
            fetch(`https://api.unsplash.com/photos/random?query=celebration&client_id=${UNSPLASH_ACCESS_KEY}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('rewardImg').src = data.urls.regular;
                })
                .catch(() => {
                    document.getElementById('rewardImg').src = 'https://via.placeholder.com/300x200?text=çå‹µåœ–ç‰‡';
                });
        }

        function backToMenu() {
            hideElement('result');
            showElement('menu');
            document.getElementById('result').classList.remove('surprise-active');
            document.getElementById('surprise').classList.remove('active');
            document.getElementById('surprise').style.display = 'none';
        }

        function startTimer() {
            // æ ¹æ“šéŠæˆ²æ¨¡å¼è¨­ç½®ä¸åŒçš„è¨ˆæ™‚å™¨æ™‚é–“
            if (currentSubject === 'english' && currentGame === 'dictation') {
                timeLeft = 1200; // 20 åˆ†é˜ = 1200 ç§’
            } else {
                timeLeft = 60; // å…¶ä»–æ¨¡å¼ 60 ç§’
            }
            updateTimer();
            timer = setInterval(() => {
                timeLeft--;
                updateTimer();
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    submitAnswer();
                }
            }, 1000);
        }

        function updateTimer() {
            let timerDiv = document.getElementById('timer');
            if (timeLeft >= 60) {
                let minutes = Math.floor(timeLeft / 60);
                let seconds = timeLeft % 60;
                timerDiv.innerText = `å‰©é¤˜æ™‚é–“: ${minutes}åˆ†${seconds}ç§’`;
            } else {
                timerDiv.innerText = `å‰©é¤˜æ™‚é–“: ${timeLeft}ç§’`;
            }
            if (timeLeft <= 10) {
                timerDiv.classList.add('warning');
            } else {
                timerDiv.classList.remove('warning');
            }
        }

        function updateProgress() {
            let progress = document.getElementById('progress');
            progress.style.width = `${(currentQuestion / totalQuestions) * 100}%`;
        }

        function showElement(id) {
            let element = document.getElementById(id);
            element.classList.add('visible');
        }

        function hideElement(id) {
            let element = document.getElementById(id);
            element.classList.remove('visible');
        }
    </script>
</body>
</html>
